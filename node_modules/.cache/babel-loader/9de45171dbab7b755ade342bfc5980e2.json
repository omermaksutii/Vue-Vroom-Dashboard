{"remainingRequest":"C:\\laragon\\www\\Vue-Vroom-Dashboard\\node_modules\\thread-loader\\dist\\cjs.js!C:\\laragon\\www\\Vue-Vroom-Dashboard\\node_modules\\babel-loader\\lib\\index.js!C:\\laragon\\www\\Vue-Vroom-Dashboard\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\laragon\\www\\Vue-Vroom-Dashboard\\src\\router\\index.js","dependencies":[{"path":"C:\\laragon\\www\\Vue-Vroom-Dashboard\\src\\router\\index.js","mtime":1644398804693},{"path":"C:\\laragon\\www\\Vue-Vroom-Dashboard\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\Vue-Vroom-Dashboard\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\laragon\\www\\Vue-Vroom-Dashboard\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\laragon\\www\\Vue-Vroom-Dashboard\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9sYXJhZ29uL3d3dy9WdWUtVnJvb20tRGFzaGJvYXJkL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwovLyBJbXBvcnQKaW1wb3J0IHsgY3JlYXRlV2ViSGlzdG9yeSwgY3JlYXRlUm91dGVyIH0gZnJvbSAndnVlLXJvdXRlcic7CmltcG9ydCBwdWJsaWNSb3V0ZXMgZnJvbSAnLi9QdWJsaWNSb3V0ZXMuanMnOwppbXBvcnQgcHJpdmF0ZVJvdXRlcyBmcm9tICcuL1ByaXZhdGVSb3V0ZXMuanMnOwppbXBvcnQgc3RvcmUgZnJvbSAnQC9zdG9yZSc7IC8vIFN0YXJ0IHZ1ZSByb3V0ZXIKCnZhciByb3V0ZXIgPSBjcmVhdGVSb3V0ZXIoewogIGhpc3Rvcnk6IGNyZWF0ZVdlYkhpc3RvcnkoKSwKICByb3V0ZXM6IFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkocHVibGljUm91dGVzKSwgX3RvQ29uc3VtYWJsZUFycmF5KHByaXZhdGVSb3V0ZXMpKQp9KTsgLy8gTWlkZGxld2FyZXMKCnJvdXRlci5iZWZvcmVFYWNoKGZ1bmN0aW9uICh0bywgZnJvbSwgbmV4dCkgewogIC8vIFJlZGlyZWN0IHRvIHJvdXRlCiAgdmFyIHJlZGlyZWN0VG9Sb3V0ZSA9IGZ1bmN0aW9uIHJlZGlyZWN0VG9Sb3V0ZShuYW1lKSB7CiAgICBpZiAobmFtZSA9PT0gZnJvbS5uYW1lKSB7CiAgICAgIG5leHQoKTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIG5leHQoewogICAgICBuYW1lOiBuYW1lCiAgICB9KTsKICB9OyAvLyBHZXQgbG9nZ2VkIHVzZXIKCgogIHZhciBsb2dnZWRVc2VyID0gc3RvcmUuZ2V0dGVycy5nZXRMb2dnZWRVc2VyOyAvLyBDaGVjayBpZiBhY2Nlc3MgdG9rZW4gZXhwaXJlZAoKICBpZiAobG9nZ2VkVXNlcikgewogICAgdmFyIGN1cnJlbnREYXRlVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwoKICAgIGlmIChjdXJyZW50RGF0ZVRpbWUgPiBsb2dnZWRVc2VyLmV4cGlyeURhdGUpIHsKICAgICAgc3RvcmUuZGlzcGF0Y2goJ2xvZ091dCcpOwogICAgICByZXR1cm4gcmVkaXJlY3RUb1JvdXRlKCdhZG1pbi5sb2dpbicpOwogICAgfQogIH0gLy8gQXV0aAoKCiAgaWYgKHRvLm1ldGEuYXV0aCkgewogICAgaWYgKGxvZ2dlZFVzZXIpIHJldHVybiBuZXh0KCk7ZWxzZSByZXR1cm4gcmVkaXJlY3RUb1JvdXRlKCdhZG1pbi5sb2dpbicpOwogIH0gLy8gR3Vlc3QKCgogIGlmICh0by5tZXRhLmd1ZXN0KSB7CiAgICBpZiAobG9nZ2VkVXNlcikgcmV0dXJuIHJlZGlyZWN0VG9Sb3V0ZSgnYWRtaW4uZGFzaGJvYXJkJyk7ZWxzZSByZXR1cm4gbmV4dCgpOwogIH0KCiAgbmV4dCgpOwp9KTsgLy8gRXhwb3J0CgpleHBvcnQgZGVmYXVsdCByb3V0ZXI7"},{"version":3,"sources":["C:/laragon/www/Vue-Vroom-Dashboard/src/router/index.js"],"names":["createWebHistory","createRouter","publicRoutes","privateRoutes","store","router","history","routes","beforeEach","to","from","next","redirectToRoute","name","loggedUser","getters","getLoggedUser","currentDateTime","Date","getTime","expiryDate","dispatch","meta","auth","guest"],"mappings":";;;AAAA;AACA,SAASA,gBAAT,EAA2BC,YAA3B,QAA+C,YAA/C;AACA,OAAOC,YAAP,MAAyB,mBAAzB;AACA,OAAOC,aAAP,MAA0B,oBAA1B;AACA,OAAOC,KAAP,MAAkB,SAAlB,C,CAEA;;AACA,IAAMC,MAAM,GAAGJ,YAAY,CAAC;AAC1BK,EAAAA,OAAO,EAAEN,gBAAgB,EADC;AAE1BO,EAAAA,MAAM,+BAAML,YAAN,sBAAuBC,aAAvB;AAFoB,CAAD,CAA3B,C,CAKA;;AACAE,MAAM,CAACG,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC;AACA,MAAIC,eAAe,GAAG,SAAlBA,eAAkB,CAAUC,IAAV,EAAgB;AACpC,QAAIA,IAAI,KAAKH,IAAI,CAACG,IAAlB,EAAwB;AACtBF,MAAAA,IAAI;AACJ;AACD;;AAEDA,IAAAA,IAAI,CAAC;AAAEE,MAAAA,IAAI,EAAEA;AAAR,KAAD,CAAJ;AACD,GAPD,CAFoC,CAWpC;;;AACA,MAAIC,UAAU,GAAGV,KAAK,CAACW,OAAN,CAAcC,aAA/B,CAZoC,CAcpC;;AACA,MAAIF,UAAJ,EAAgB;AACd,QAAIG,eAAe,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAtB;;AACA,QAAIF,eAAe,GAAGH,UAAU,CAACM,UAAjC,EAA6C;AAC3ChB,MAAAA,KAAK,CAACiB,QAAN,CAAe,QAAf;AACA,aAAOT,eAAe,CAAC,aAAD,CAAtB;AACD;AACF,GArBmC,CAuBpC;;;AACA,MAAIH,EAAE,CAACa,IAAH,CAAQC,IAAZ,EAAkB;AAChB,QAAIT,UAAJ,EAAgB,OAAOH,IAAI,EAAX,CAAhB,KACK,OAAOC,eAAe,CAAC,aAAD,CAAtB;AACN,GA3BmC,CA6BpC;;;AACA,MAAIH,EAAE,CAACa,IAAH,CAAQE,KAAZ,EAAmB;AACjB,QAAIV,UAAJ,EAAgB,OAAOF,eAAe,CAAC,iBAAD,CAAtB,CAAhB,KACK,OAAOD,IAAI,EAAX;AACN;;AAEDA,EAAAA,IAAI;AACL,CApCD,E,CAsCA;;AACA,eAAeN,MAAf","sourcesContent":["// Import\r\nimport { createWebHistory, createRouter } from 'vue-router';\r\nimport publicRoutes from './PublicRoutes.js';\r\nimport privateRoutes from './PrivateRoutes.js';\r\nimport store from '@/store';\r\n\r\n// Start vue router\r\nconst router = createRouter({\r\n  history: createWebHistory(),\r\n  routes: [...publicRoutes, ...privateRoutes],\r\n});\r\n\r\n// Middlewares\r\nrouter.beforeEach((to, from, next) => {\r\n  // Redirect to route\r\n  let redirectToRoute = function (name) {\r\n    if (name === from.name) {\r\n      next();\r\n      return;\r\n    }\r\n\r\n    next({ name: name });\r\n  };\r\n\r\n  // Get logged user\r\n  let loggedUser = store.getters.getLoggedUser;\r\n\r\n  // Check if access token expired\r\n  if (loggedUser) {\r\n    let currentDateTime = new Date().getTime();\r\n    if (currentDateTime > loggedUser.expiryDate) {\r\n      store.dispatch('logOut');\r\n      return redirectToRoute('admin.login');\r\n    }\r\n  }\r\n\r\n  // Auth\r\n  if (to.meta.auth) {\r\n    if (loggedUser) return next();\r\n    else return redirectToRoute('admin.login');\r\n  }\r\n\r\n  // Guest\r\n  if (to.meta.guest) {\r\n    if (loggedUser) return redirectToRoute('admin.dashboard');\r\n    else return next();\r\n  }\r\n\r\n  next();\r\n});\r\n\r\n// Export\r\nexport default router;\r\n"]}]}